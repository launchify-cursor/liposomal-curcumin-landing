function initUrlParameterForwarding(){var e=window.location.search;function t(t){if(!t||"#"===t||t.startsWith("javascript:"))return t;try{var n,i=t.split("?")[0],c=t.includes("?")?t.split("?")[1]:"",o=e.substring(1);if(c&&o){var s=new URLSearchParams(c);new URLSearchParams(o).forEach(function(e,t){s.has(t)||s.append(t,e)}),n=s.toString()}else n=c||o;return i+(n?"?"+n:"")}catch(e){return t}}e&&"?"!==e&&(window.navigateWithParams=function(e){window.location.href=t(e)},document.querySelectorAll("a[href]").forEach(function(e){var n=e.getAttribute("href");!n||"#"===n||n.startsWith("#")||n.startsWith("javascript:")||e.setAttribute("href",t(n))}),document.querySelectorAll(".cta-button, .sticky-cta-btn").forEach(function(t){t.setAttribute("data-url-params",e)}),window.appendUrlParams=t,window.getUrlParams=function(){return e})}function initMobileMenu(){const e=document.querySelector(".mobile-menu-btn"),t=document.getElementById("mobileMenu"),n=document.querySelector(".mobile-menu-close"),i=document.body;e&&t&&(e.addEventListener("click",function(){t.classList.add("active"),i.style.overflow="hidden"}),n.addEventListener("click",function(){t.classList.remove("active"),i.style.overflow=""}),t.addEventListener("click",function(e){e.target===t&&(t.classList.remove("active"),i.style.overflow="")}))}function initAccordions(){const e=document.querySelectorAll(".accordion-item");e.forEach(function(t){const n=t.querySelector(".accordion-header"),i=t.querySelector(".accordion-content");n.addEventListener("click",function(){const n=t.classList.contains("active");e.forEach(function(e){e.classList.remove("active"),e.querySelector(".accordion-content").style.maxHeight=null}),n||(t.classList.add("active"),i.style.maxHeight=i.scrollHeight+"px")})})}function initHeroAccordions(){const e=document.querySelectorAll(".hero-accordion-item");requestAnimationFrame(function(){e.forEach(function(e,t){const n=e.querySelector(".hero-accordion-content");e.classList.contains("active")&&(n.style.maxHeight=n.scrollHeight+"px")})}),e.forEach(function(t){const n=t.querySelector(".hero-accordion-header"),i=t.querySelector(".hero-accordion-content");n.addEventListener("click",function(){const n=t.classList.contains("active");e.forEach(function(e){e.classList.remove("active"),e.querySelector(".hero-accordion-content").style.maxHeight=null}),n||(t.classList.add("active"),i.style.maxHeight=i.scrollHeight+"px")})})}function initFaqAccordions(){const e=document.querySelectorAll(".faq-item");e.forEach(function(t){const n=t.querySelector(".faq-question"),i=t.querySelector(".faq-answer");n.addEventListener("click",function(){const n=t.classList.contains("active");e.forEach(function(e){e.classList.remove("active"),e.querySelector(".faq-answer").style.maxHeight=null}),n||(t.classList.add("active"),i.style.maxHeight=i.scrollHeight+"px")})})}function initFaqViewAll(){const e=document.getElementById("faqViewAll"),t=document.getElementById("faqList");e&&t&&e.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();if(t.classList.contains("expanded")){t.classList.remove("expanded"),e.querySelector(".faq-view-all-text").textContent="View All";t.querySelectorAll(".faq-item-hidden").forEach(function(e){e.classList.remove("active");const t=e.querySelector(".faq-answer");t&&(t.style.maxHeight=null)})}else t.classList.add("expanded"),e.querySelector(".faq-view-all-text").textContent="View Less"})}function initReviewsFilters(){const e=document.getElementById("reviewsList"),t=document.querySelector(".search-input"),n=document.querySelector(".sort-select"),i=document.querySelectorAll(".topic-pill"),c=document.querySelector(".no-reviews-message"),o=document.getElementById("reviewsPagination");if(!e)return;let s=[],a="",r="highest",l=1;function d(){return Array.from(e.querySelectorAll(".review-item"))}function u(){return d().filter(function(e){const t=e.querySelector(".review-text").textContent.toLowerCase(),n=(e.dataset.topics||"").toLowerCase().split(","),i=""===a||t.includes(a.toLowerCase()),c=0===s.length||s.some(function(e){return n.includes(e.toLowerCase())||t.includes(e.toLowerCase())});return i&&c})}function f(){const t=d(),n=u(),i=n.sort(function(e,t){switch(r){case"highest":return parseInt(t.dataset.rating)-parseInt(e.dataset.rating);case"lowest":return parseInt(e.dataset.rating)-parseInt(t.dataset.rating);case"recent":return new Date(t.dataset.date)-new Date(e.dataset.date);case"helpful":return parseInt(t.dataset.helpful)-parseInt(e.dataset.helpful);default:return 0}});const s=5*(l-1),a=s+5;t.forEach(function(e){e.style.display="none"}),i.forEach(function(e,t){t>=s&&t<a&&(e.style.display="")}),i.forEach(function(t){e.appendChild(t)}),c&&(e.appendChild(c),c.style.display=0===i.length?"block":"none"),function(e){if(!o)return;const t=Math.ceil(e/5),n=o.querySelectorAll(".page-num"),i=o.querySelector(".page-arrow.prev"),c=o.querySelector(".page-arrow.next"),s=o.querySelector(".page-ellipsis");i&&(i.disabled=1===l),c&&(c.disabled=l>=t),n.forEach(function(e){const n=parseInt(e.dataset.page);e.classList.toggle("active",n===l),e.style.display=n>t?"none":""}),s&&(s.style.display=t>6?"":"none")}(i.length)}function v(t){const n=u().length,i=Math.ceil(n/5);l=Math.max(1,Math.min(t,i)),f(),e.scrollIntoView({behavior:"smooth",block:"start"})}if(t&&t.addEventListener("input",function(e){a=e.target.value,l=1,f()}),n&&n.addEventListener("change",function(e){const t=e.target.value.toLowerCase();t.includes("highest")?r="highest":t.includes("lowest")?r="lowest":t.includes("recent")?r="recent":t.includes("helpful")&&(r="helpful"),l=1,f()}),i.forEach(function(e){e.addEventListener("click",function(){const t=e.textContent.trim().toLowerCase();e.classList.contains("active")?(e.classList.remove("active"),s=s.filter(function(e){return e!==t})):(e.classList.add("active"),s.push(t)),l=1,f()})}),o){o.querySelectorAll(".page-num").forEach(function(e){e.addEventListener("click",function(){v(parseInt(e.dataset.page))})});const e=o.querySelector(".page-arrow.prev");e&&e.addEventListener("click",function(){l>1&&v(l-1)});const t=o.querySelector(".page-arrow.next");t&&t.addEventListener("click",function(){v(l+1)})}e.querySelectorAll(".helpful-btn").forEach(function(e){e.addEventListener("click",function(){const t=e.querySelector(".helpful-count");if(t&&!e.classList.contains("clicked")){const n=parseInt(t.textContent);t.textContent=n+1,e.classList.add("clicked");const i=e.closest(".review-item");i&&"up"===e.dataset.type&&(i.dataset.helpful=parseInt(i.dataset.helpful)+1)}})}),f()}function initStickyHeader(){const e=document.querySelector(".site-header");let t=0,n=!1;window.addEventListener("scroll",function(){n||(requestAnimationFrame(function(){const i=window.pageYOffset;i>100?e.classList.add("scrolled"):e.classList.remove("scrolled"),i>t&&i>300?e.classList.add("hidden"):e.classList.remove("hidden"),t=i,n=!1}),n=!0)},{passive:!0})}function initStickyCta(){const e=document.getElementById("stickyCta"),t=document.querySelector(".hero-section");if(e&&t){let i=0,c=!1;function n(){i=t.offsetTop+t.offsetHeight}requestAnimationFrame(n),window.addEventListener("resize",function(){requestAnimationFrame(n)},{passive:!0}),window.addEventListener("scroll",function(){c||(requestAnimationFrame(function(){window.pageYOffset>i-200?e.classList.add("visible"):e.classList.remove("visible"),c=!1}),c=!0)},{passive:!0})}}function initMobileCarousel(){const e=document.querySelector(".hero-mobile-carousel"),t=(document.querySelector(".carousel-track"),document.querySelectorAll(".carousel-slide"));if(!e||0===t.length)return;let n,i,c=!1;e.addEventListener("mousedown",t=>{c=!0,e.classList.add("active"),n=t.pageX-e.offsetLeft,i=e.scrollLeft}),e.addEventListener("mouseleave",()=>{c=!1,e.classList.remove("active")}),e.addEventListener("mouseup",()=>{c=!1,e.classList.remove("active")}),e.addEventListener("mousemove",t=>{if(!c)return;t.preventDefault();const o=2*(t.pageX-e.offsetLeft-n);e.scrollLeft=i-o}),e.addEventListener("touchstart",t=>{n=t.touches[0].pageX-e.offsetLeft,i=e.scrollLeft}),e.addEventListener("touchmove",t=>{const c=2*(t.touches[0].pageX-e.offsetLeft-n);e.scrollLeft=i-c})}function initReviewsCarousel(){const e=document.querySelector(".reviews-track"),t=document.querySelector(".reviews-nav .prev"),n=document.querySelector(".reviews-nav .next"),i=document.querySelectorAll(".review-card");if(!e||0===i.length)return;let c=0,o=0;function s(){o||(o=i[0].offsetWidth+16),e.style.transform=`translateX(-${c*o}px)`}requestAnimationFrame(function(){o=i[0].offsetWidth+16}),t&&t.addEventListener("click",function(){c>0&&(c--,s())}),n&&n.addEventListener("click",function(){c<i.length-1&&(c++,s())});let a,r=!1;e.addEventListener("mousedown",e=>{r=!0,a=e.pageX}),e.addEventListener("mouseup",e=>{if(!r)return;r=!1;const t=a-e.pageX;t>50&&c<i.length-1?(c++,s()):t<-50&&c>0&&(c--,s())}),e.addEventListener("mouseleave",()=>{r=!1})}function initClinicalSidebar(){const e=document.getElementById("clinicalSidebar"),t=document.getElementById("clinicalSidebarOverlay"),n=document.getElementById("clinicalSidebarClose"),i=document.querySelectorAll(".clinical-trials-link"),c=document.body;if(!e||!t)return void console.log("Clinical sidebar elements not found");function o(){e.classList.remove("active"),t.classList.remove("active"),c.style.overflow=""}i&&i.length>0&&i.forEach(function(n){n.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.classList.add("active"),t.classList.add("active"),c.style.overflow="hidden"})}),n&&n.addEventListener("click",function(e){e.preventDefault(),o()}),t.addEventListener("click",o),document.addEventListener("keydown",function(t){"Escape"===t.key&&e.classList.contains("active")&&o()});const s=document.querySelectorAll(".clinical-accordion-item");s&&s.length>0&&s.forEach(function(e){const t=e.querySelector(".clinical-accordion-header");t&&t.addEventListener("click",function(t){t.stopPropagation();e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")})})}function initTechSidebar(){var e=document.getElementById("openTechSidebar"),t=document.getElementById("techSidebar"),n=document.getElementById("techSidebarOverlay"),i=document.getElementById("techSidebarClose");function c(){t.classList.remove("active"),n.classList.remove("active"),document.body.style.overflow=""}t&&n&&(e&&e.addEventListener("click",function(e){e.preventDefault(),t.classList.add("active"),n.classList.add("active"),document.body.style.overflow="hidden"}),n.addEventListener("click",c),i&&i.addEventListener("click",c),document.addEventListener("keydown",function(e){"Escape"===e.key&&t.classList.contains("active")&&c()}))}function initIngredientsSidebar(){var e=document.getElementById("openIngredientsSidebar"),t=document.getElementById("openIngredientsSidebarMobile"),n=document.getElementById("openIngredientsSidebarAlt"),i=document.getElementById("ingredientsSidebar"),c=document.getElementById("ingredientsSidebarOverlay"),o=document.getElementById("ingredientsSidebarClose");function s(e){e.preventDefault(),i.classList.add("active"),c.classList.add("active"),document.body.style.overflow="hidden"}function a(){i.classList.remove("active"),c.classList.remove("active"),document.body.style.overflow=""}i&&c&&(e&&e.addEventListener("click",s),t&&t.addEventListener("click",s),n&&n.addEventListener("click",s),c.addEventListener("click",a),o&&o.addEventListener("click",a),document.addEventListener("keydown",function(e){"Escape"===e.key&&i.classList.contains("active")&&a()}))}function initBlendAccordions(){const e=document.querySelectorAll(".blend-accordion-item");e&&0!==e.length&&e.forEach(function(t){const n=t.querySelector(".blend-item");n&&n.addEventListener("click",function(){const n=t.classList.contains("active");e.forEach(function(e){e.classList.remove("active")}),n||t.classList.add("active")})})}document.addEventListener("DOMContentLoaded",function(){initMobileMenu(),initAccordions(),initHeroAccordions(),initFaqAccordions(),initFaqViewAll(),initReviewsFilters(),initStickyHeader(),initStickyCta(),initMobileCarousel(),initReviewsCarousel(),initClinicalSidebar(),initTechSidebar(),initIngredientsSidebar(),initBlendAccordions(),initUrlParameterForwarding()}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"!==t){e.preventDefault();const n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}})}),document.querySelectorAll(".option-btn").forEach(e=>{e.addEventListener("click",function(){this.parentElement.querySelectorAll(".option-btn").forEach(e=>e.classList.remove("active")),this.classList.add("active");const e=this.getAttribute("data-price");if(e){const t=document.querySelector(".price-amount");t&&(t.textContent=e)}const t=this.getAttribute("data-supply");if(t){const e=document.getElementById("supplyText");e&&(e.innerHTML=t+" supply delivered monthly.<br>Pause or cancel anytime.")}})});