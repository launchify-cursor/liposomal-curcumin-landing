function initMobileMenu(){const e=document.querySelector(".mobile-menu-btn"),t=document.getElementById("mobileMenu"),n=document.querySelector(".mobile-menu-close"),c=document.body;e&&t&&(e.addEventListener("click",function(){t.classList.add("active"),c.style.overflow="hidden"}),n.addEventListener("click",function(){t.classList.remove("active"),c.style.overflow=""}),t.addEventListener("click",function(e){e.target===t&&(t.classList.remove("active"),c.style.overflow="")}))}function initAccordions(){const e=document.querySelectorAll(".accordion-item");e.forEach(function(t){const n=t.querySelector(".accordion-header"),c=t.querySelector(".accordion-content");n.addEventListener("click",function(){const n=t.classList.contains("active");e.forEach(function(e){e.classList.remove("active"),e.querySelector(".accordion-content").style.maxHeight=null}),n||(t.classList.add("active"),c.style.maxHeight=c.scrollHeight+"px")})})}function initHeroAccordions(){const e=document.querySelectorAll(".hero-accordion-item");e.forEach(function(e,t){const n=e.querySelector(".hero-accordion-content");e.classList.contains("active")&&(n.style.maxHeight=n.scrollHeight+"px")}),e.forEach(function(t){const n=t.querySelector(".hero-accordion-header"),c=t.querySelector(".hero-accordion-content");n.addEventListener("click",function(){const n=t.classList.contains("active");e.forEach(function(e){e.classList.remove("active"),e.querySelector(".hero-accordion-content").style.maxHeight=null}),n||(t.classList.add("active"),c.style.maxHeight=c.scrollHeight+"px")})})}function initFaqAccordions(){const e=document.querySelectorAll(".faq-item");e.forEach(function(t){const n=t.querySelector(".faq-question"),c=t.querySelector(".faq-answer");n.addEventListener("click",function(){const n=t.classList.contains("active");e.forEach(function(e){e.classList.remove("active"),e.querySelector(".faq-answer").style.maxHeight=null}),n||(t.classList.add("active"),c.style.maxHeight=c.scrollHeight+"px")})})}function initFaqViewAll(){const e=document.getElementById("faqViewAll"),t=document.getElementById("faqList");e&&t&&e.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();if(t.classList.contains("expanded")){t.classList.remove("expanded"),e.querySelector(".faq-view-all-text").textContent="View All";t.querySelectorAll(".faq-item-hidden").forEach(function(e){e.classList.remove("active");const t=e.querySelector(".faq-answer");t&&(t.style.maxHeight=null)})}else t.classList.add("expanded"),e.querySelector(".faq-view-all-text").textContent="View Less"})}function initReviewsFilters(){const e=document.getElementById("reviewsList"),t=document.querySelector(".search-input"),n=document.querySelector(".sort-select"),c=document.querySelectorAll(".topic-pill"),i=document.querySelector(".no-reviews-message"),o=document.getElementById("reviewsPagination");if(!e)return;let s=[],a="",r="highest",l=1;function d(){return Array.from(e.querySelectorAll(".review-item"))}function u(){return d().filter(function(e){const t=e.querySelector(".review-text").textContent.toLowerCase(),n=(e.dataset.topics||"").toLowerCase().split(","),c=""===a||t.includes(a.toLowerCase()),i=0===s.length||s.some(function(e){return n.includes(e.toLowerCase())||t.includes(e.toLowerCase())});return c&&i})}function f(){const t=d(),n=u(),c=n.sort(function(e,t){switch(r){case"highest":return parseInt(t.dataset.rating)-parseInt(e.dataset.rating);case"lowest":return parseInt(e.dataset.rating)-parseInt(t.dataset.rating);case"recent":return new Date(t.dataset.date)-new Date(e.dataset.date);case"helpful":return parseInt(t.dataset.helpful)-parseInt(e.dataset.helpful);default:return 0}});const s=5*(l-1),a=s+5;t.forEach(function(e){e.style.display="none"}),c.forEach(function(e,t){t>=s&&t<a&&(e.style.display="")}),c.forEach(function(t){e.appendChild(t)}),i&&(e.appendChild(i),i.style.display=0===c.length?"block":"none"),function(e){if(!o)return;const t=Math.ceil(e/5),n=o.querySelectorAll(".page-num"),c=o.querySelector(".page-arrow.prev"),i=o.querySelector(".page-arrow.next"),s=o.querySelector(".page-ellipsis");c&&(c.disabled=1===l),i&&(i.disabled=l>=t),n.forEach(function(e){const n=parseInt(e.dataset.page);e.classList.toggle("active",n===l),e.style.display=n>t?"none":""}),s&&(s.style.display=t>6?"":"none")}(c.length)}function v(t){const n=u().length,c=Math.ceil(n/5);l=Math.max(1,Math.min(t,c)),f(),e.scrollIntoView({behavior:"smooth",block:"start"})}if(t&&t.addEventListener("input",function(e){a=e.target.value,l=1,f()}),n&&n.addEventListener("change",function(e){const t=e.target.value.toLowerCase();t.includes("highest")?r="highest":t.includes("lowest")?r="lowest":t.includes("recent")?r="recent":t.includes("helpful")&&(r="helpful"),l=1,f()}),c.forEach(function(e){e.addEventListener("click",function(){const t=e.textContent.trim().toLowerCase();e.classList.contains("active")?(e.classList.remove("active"),s=s.filter(function(e){return e!==t})):(e.classList.add("active"),s.push(t)),l=1,f()})}),o){o.querySelectorAll(".page-num").forEach(function(e){e.addEventListener("click",function(){v(parseInt(e.dataset.page))})});const e=o.querySelector(".page-arrow.prev");e&&e.addEventListener("click",function(){l>1&&v(l-1)});const t=o.querySelector(".page-arrow.next");t&&t.addEventListener("click",function(){v(l+1)})}e.querySelectorAll(".helpful-btn").forEach(function(e){e.addEventListener("click",function(){const t=e.querySelector(".helpful-count");if(t&&!e.classList.contains("clicked")){const n=parseInt(t.textContent);t.textContent=n+1,e.classList.add("clicked");const c=e.closest(".review-item");c&&"up"===e.dataset.type&&(c.dataset.helpful=parseInt(c.dataset.helpful)+1)}})}),f()}function initStickyHeader(){const e=document.querySelector(".site-header");let t=0;window.addEventListener("scroll",function(){const n=window.pageYOffset;n>100?e.classList.add("scrolled"):e.classList.remove("scrolled"),n>t&&n>300?e.classList.add("hidden"):e.classList.remove("hidden"),t=n})}function initStickyCta(){const e=document.getElementById("stickyCta"),t=document.querySelector(".hero-section");e&&t&&window.addEventListener("scroll",function(){const n=t.offsetTop+t.offsetHeight;window.pageYOffset>n-200?e.classList.add("visible"):e.classList.remove("visible")})}function initMobileCarousel(){const e=document.querySelector(".hero-mobile-carousel"),t=(document.querySelector(".carousel-track"),document.querySelectorAll(".carousel-slide"));if(!e||0===t.length)return;let n,c,i=!1;e.addEventListener("mousedown",t=>{i=!0,e.classList.add("active"),n=t.pageX-e.offsetLeft,c=e.scrollLeft}),e.addEventListener("mouseleave",()=>{i=!1,e.classList.remove("active")}),e.addEventListener("mouseup",()=>{i=!1,e.classList.remove("active")}),e.addEventListener("mousemove",t=>{if(!i)return;t.preventDefault();const o=2*(t.pageX-e.offsetLeft-n);e.scrollLeft=c-o}),e.addEventListener("touchstart",t=>{n=t.touches[0].pageX-e.offsetLeft,c=e.scrollLeft}),e.addEventListener("touchmove",t=>{const i=2*(t.touches[0].pageX-e.offsetLeft-n);e.scrollLeft=c-i})}function initReviewsCarousel(){const e=document.querySelector(".reviews-track"),t=document.querySelector(".reviews-nav .prev"),n=document.querySelector(".reviews-nav .next"),c=document.querySelectorAll(".review-card");if(!e||0===c.length)return;let i=0;const o=c[0].offsetWidth+16;function s(){e.style.transform=`translateX(-${i*o}px)`}t&&t.addEventListener("click",function(){i>0&&(i--,s())}),n&&n.addEventListener("click",function(){i<c.length-1&&(i++,s())});let a,r=!1;e.addEventListener("mousedown",e=>{r=!0,a=e.pageX}),e.addEventListener("mouseup",e=>{if(!r)return;r=!1;const t=a-e.pageX;t>50&&i<c.length-1?(i++,s()):t<-50&&i>0&&(i--,s())}),e.addEventListener("mouseleave",()=>{r=!1})}function initClinicalSidebar(){const e=document.getElementById("clinicalSidebar"),t=document.getElementById("clinicalSidebarOverlay"),n=document.getElementById("clinicalSidebarClose"),c=document.querySelectorAll(".clinical-trials-link"),i=document.body;if(!e||!t)return void console.log("Clinical sidebar elements not found");function o(){e.classList.remove("active"),t.classList.remove("active"),i.style.overflow=""}c&&c.length>0&&c.forEach(function(n){n.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.classList.add("active"),t.classList.add("active"),i.style.overflow="hidden"})}),n&&n.addEventListener("click",function(e){e.preventDefault(),o()}),t.addEventListener("click",o),document.addEventListener("keydown",function(t){"Escape"===t.key&&e.classList.contains("active")&&o()});const s=document.querySelectorAll(".clinical-accordion-item");s&&s.length>0&&s.forEach(function(e){const t=e.querySelector(".clinical-accordion-header");t&&t.addEventListener("click",function(t){t.stopPropagation();e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")})})}function initTechSidebar(){var e=document.getElementById("openTechSidebar"),t=document.getElementById("techSidebar"),n=document.getElementById("techSidebarOverlay"),c=document.getElementById("techSidebarClose");function i(){t.classList.remove("active"),n.classList.remove("active"),document.body.style.overflow=""}t&&n&&(e&&e.addEventListener("click",function(e){e.preventDefault(),t.classList.add("active"),n.classList.add("active"),document.body.style.overflow="hidden"}),n.addEventListener("click",i),c&&c.addEventListener("click",i),document.addEventListener("keydown",function(e){"Escape"===e.key&&t.classList.contains("active")&&i()}))}function initIngredientsSidebar(){var e=document.getElementById("openIngredientsSidebar"),t=document.getElementById("openIngredientsSidebarMobile"),n=document.getElementById("openIngredientsSidebarAlt"),c=document.getElementById("ingredientsSidebar"),i=document.getElementById("ingredientsSidebarOverlay"),o=document.getElementById("ingredientsSidebarClose");function s(e){e.preventDefault(),c.classList.add("active"),i.classList.add("active"),document.body.style.overflow="hidden"}function a(){c.classList.remove("active"),i.classList.remove("active"),document.body.style.overflow=""}c&&i&&(e&&e.addEventListener("click",s),t&&t.addEventListener("click",s),n&&n.addEventListener("click",s),i.addEventListener("click",a),o&&o.addEventListener("click",a),document.addEventListener("keydown",function(e){"Escape"===e.key&&c.classList.contains("active")&&a()}))}function initBlendAccordions(){const e=document.querySelectorAll(".blend-accordion-item");e&&0!==e.length&&e.forEach(function(t){const n=t.querySelector(".blend-item");n&&n.addEventListener("click",function(){const n=t.classList.contains("active");e.forEach(function(e){e.classList.remove("active")}),n||t.classList.add("active")})})}document.addEventListener("DOMContentLoaded",function(){initMobileMenu(),initAccordions(),initHeroAccordions(),initFaqAccordions(),initFaqViewAll(),initReviewsFilters(),initStickyHeader(),initStickyCta(),initMobileCarousel(),initReviewsCarousel(),initClinicalSidebar(),initTechSidebar(),initIngredientsSidebar(),initBlendAccordions()}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"!==t){e.preventDefault();const n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}})}),document.querySelectorAll(".option-btn").forEach(e=>{e.addEventListener("click",function(){this.parentElement.querySelectorAll(".option-btn").forEach(e=>e.classList.remove("active")),this.classList.add("active");const e=this.getAttribute("data-price");if(e){const t=document.querySelector(".price-amount");t&&(t.textContent=e)}})});